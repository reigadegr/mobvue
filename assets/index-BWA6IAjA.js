import{t as x,n as T,c as k,u as C,F as A,p as N,w as q,r as z,a as I}from"./index--y6U6okq.js";import{B as M}from"./index-Auiap5Id.js";import{C as U}from"./index-DhNScZA6.js";import{F as D}from"./index-712jMi39.js";import{_ as K}from"./Description.vue_vue_type_script_setup_true_lang-uQf1qSd1.js";import{g as y,m as i,r as O,n as R,B as $,I as B,C as j,N as G,v as c,K as H,H as W}from"./vue-CP3K8uBX.js";import{u as Y}from"./use-expose-CprcbmfO.js";import"./use-id-DKXSyRto.js";const[J,L]=k("form"),Q={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:T,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:x,showErrorMessage:x,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var X=y({name:J,props:Q,emits:["submit","failed"],setup(u,{emit:f,slots:p}){const{children:s,linkChildren:l}=C(A),m=e=>e?s.filter(t=>e.includes(t.name)):s,g=e=>new Promise((t,n)=>{const o=[];m(e).reduce((F,P)=>F.then(()=>{if(!o.length)return P.validate().then(S=>{S&&o.push(S)})}),Promise.resolve()).then(()=>{o.length?n(o):t()})}),a=e=>new Promise((t,n)=>{const o=m(e);Promise.all(o.map(r=>r.validate())).then(r=>{r=r.filter(Boolean),r.length?n(r):t()})}),v=e=>{const t=s.find(n=>n.name===e);return t?new Promise((n,o)=>{t.validate().then(r=>{r?o(r):n()})}):Promise.reject()},_=e=>typeof e=="string"?v(e):u.validateFirst?g(e):a(e),h=e=>{typeof e=="string"&&(e=[e]),m(e).forEach(n=>{n.resetValidation()})},b=()=>s.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),d=(e,t)=>{s.some(n=>n.name===e?(n.$el.scrollIntoView(t),!0):!1)},V=()=>s.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),w=()=>{const e=V();_().then(()=>f("submit",e)).catch(t=>{f("failed",{values:e,errors:t});const{scrollToError:n,scrollToErrorPosition:o}=u;n&&t[0].name&&d(t[0].name,o?{block:o}:void 0)})},E=e=>{N(e),w()};return l({props:u}),Y({submit:w,validate:_,getValues:V,scrollToField:d,resetValidation:h,getValidationStatus:b}),()=>{var e;return i("form",{class:L(),onSubmit:E},[(e=p.default)==null?void 0:e.call(p)])}}});const Z=q(X);function ee(u){return z({url:"users/login",method:"post",data:u})}const te={"un-h-full":"","un-flex-center":"","un-flex-col":"","un-select-none":""},ne={"un-mx-16px":"","un-my-32px":""},me=y({__name:"index",setup(u){const f=W(),p=I(),s=O(!1),l=R({username:"admin",password:"123456"});function m(){s.value=!0,ee(l).then(({data:g})=>{p.setToken(g.token),f.push("/")}).catch(()=>{}).finally(()=>{s.value=!1})}return(g,a)=>{const v=D,_=U,h=M,b=Z;return j(),$("div",te,[i(K,{"un-mb-20px":""}),i(b,{onSubmit:m},{default:B(()=>[i(_,{inset:""},{default:B(()=>[i(v,{modelValue:c(l).username,"onUpdate:modelValue":a[0]||(a[0]=d=>c(l).username=d),name:"username",label:"用户名",size:"large",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),i(v,{modelValue:c(l).password,"onUpdate:modelValue":a[1]||(a[1]=d=>c(l).password=d),name:"password",label:"密码",type:"password",size:"large",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),G("div",ne,[i(h,{loading:c(s),type:"primary","native-type":"submit",size:"large",round:"",block:""},{default:B(()=>a[2]||(a[2]=[H(" 登 录 ")])),_:1},8,["loading"])])]),_:1})])}}});export{me as default};
